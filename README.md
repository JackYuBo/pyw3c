<!DOCTYPE html> <html lang="zh"> <head> <meta charset="utf-8"/> </head> <body><p>Pyw3c帮助</p> <p>python区块链开发框架：合约编译，部署，测试，生成web端js</p> <p>特色：<br>这个框架是自己在开发智能合约时不习惯nodejs，用python重新开发的类似于truffle的框架。 </p><p>config.py<br>配置文件：设置galanche或者测试链节点地址端口,测试web服务器地址端口等 </p><p>pyw3c.py<br>编译: python pyw3c.py compile<br>部署: python pyw3c.py migrate<br>测试: python pyw3c.py test<br>生成: python pyw3c.py webc<br>启动: python pyw3c.py run </p><p>编译:<br>编译时默认遍历整个contracts文件夹第一层目录,将需要部署的主合约放在第一层目录,其他library,interface<br>合约放在library和interface等目录，在主合约里面引用时会去加载，但不会直接去编译library和interface的合约。<br>编译完成后生成build目录，build目录下包含每个合约的abi.s,bytecode.s,合约名.json </p><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code><span class="pln">G</span><span class="pun">:</span><span class="pln">\work\pyproject\pyw3c</span><span class="pun">&gt;</span><span class="pln">python pyw3c</span><span class="pun">.</span><span class="pln">py compile</span></code></li><li class="L1"><code><span class="pun">开始编译合约..</span></code></li><li class="L2"><code><span class="pln"> </span><span class="pun">生成合约</span><span class="pln">F3Devents</span><span class="pun">的</span><span class="kwd">interface</span><span class="pun">文件:</span><span class="pln"> </span><span class="pun">../</span><span class="pln">build</span><span class="pun">/</span><span class="pln">F3Devents</span><span class="pun">/</span><span class="pln">F3Devents</span><span class="pun">.</span><span class="pln">json </span><span class="pun">..</span></code></li><li class="L3"><code><span class="pln"> </span><span class="pun">生成合约</span><span class="pln">F3Devents</span><span class="pun">的</span><span class="pln">abi</span><span class="pun">文件:</span><span class="pln"> </span><span class="pun">../</span><span class="pln">build</span><span class="pun">/</span><span class="pln">F3Devents</span><span class="pun">/</span><span class="pln">abi</span><span class="pun">.</span><span class="pln">json </span><span class="pun">..</span></code></li><li class="L4"><code><span class="pln"> </span><span class="pun">生成合约</span><span class="pln">F3Devents</span><span class="pun">的</span><span class="pln">bytecode</span><span class="pun">文件:</span><span class="pln"> </span><span class="pun">../</span><span class="pln">build</span><span class="pun">/</span><span class="pln">F3Devents</span><span class="pun">/</span><span class="pln">bytecode</span><span class="pun">.</span><span class="pln">s </span><span class="pun">..</span></code></li><li class="L5"><code><span class="pln"> </span><span class="pun">生成合约</span><span class="typ">FoMo3Dlong</span><span class="pun">的</span><span class="kwd">interface</span><span class="pun">文件:</span><span class="pln"> </span><span class="pun">../</span><span class="pln">build</span><span class="pun">/</span><span class="typ">FoMo3Dlong</span><span class="pun">/</span><span class="typ">FoMo3Dlong</span><span class="pun">.</span><span class="pln">json </span><span class="pun">..</span></code></li><li class="L6"><code><span class="pln"> </span><span class="pun">生成合约</span><span class="typ">FoMo3Dlong</span><span class="pun">的</span><span class="pln">abi</span><span class="pun">文件:</span><span class="pln"> </span><span class="pun">../</span><span class="pln">build</span><span class="pun">/</span><span class="typ">FoMo3Dlong</span><span class="pun">/</span><span class="pln">abi</span><span class="pun">.</span><span class="pln">json </span><span class="pun">..</span></code></li><li class="L7"><code><span class="pln"> </span><span class="pun">生成合约</span><span class="typ">FoMo3Dlong</span><span class="pun">的</span><span class="pln">bytecode</span><span class="pun">文件:</span><span class="pln"> </span><span class="pun">../</span><span class="pln">build</span><span class="pun">/</span><span class="typ">FoMo3Dlong</span><span class="pun">/</span><span class="pln">bytecode</span><span class="pun">.</span><span class="pln">s </span><span class="pun">..</span></code></li><li class="L8"><code><span class="pln"> </span><span class="pun">生成合约</span><span class="typ">Hourglass</span><span class="pun">的</span><span class="kwd">interface</span><span class="pun">文件:</span><span class="pln"> </span><span class="pun">../</span><span class="pln">build</span><span class="pun">/</span><span class="typ">Hourglass</span><span class="pun">/</span><span class="typ">Hourglass</span><span class="pun">.</span><span class="pln">json </span><span class="pun">..</span></code></li><li class="L9"><code><span class="pln"> </span><span class="pun">生成合约</span><span class="typ">Hourglass</span><span class="pun">的</span><span class="pln">abi</span><span class="pun">文件:</span><span class="pln"> </span><span class="pun">../</span><span class="pln">build</span><span class="pun">/</span><span class="typ">Hourglass</span><span class="pun">/</span><span class="pln">abi</span><span class="pun">.</span><span class="pln">json </span><span class="pun">..</span></code></li><li class="L0"><code><span class="pln"> </span><span class="pun">生成合约</span><span class="typ">Hourglass</span><span class="pun">的</span><span class="pln">bytecode</span><span class="pun">文件:</span><span class="pln"> </span><span class="pun">../</span><span class="pln">build</span><span class="pun">/</span><span class="typ">Hourglass</span><span class="pun">/</span><span class="pln">bytecode</span><span class="pun">.</span><span class="pln">s </span><span class="pun">..</span></code></li><li class="L1"><code><span class="pln"> </span><span class="pun">生成合约</span><span class="typ">PlayerBook</span><span class="pun">的</span><span class="kwd">interface</span><span class="pun">文件:</span><span class="pln"> </span><span class="pun">../</span><span class="pln">build</span><span class="pun">/</span><span class="typ">PlayerBook</span><span class="pun">/</span><span class="typ">PlayerBook</span><span class="pun">.</span><span class="pln">json </span><span class="pun">..</span></code></li><li class="L2"><code><span class="pln"> </span><span class="pun">生成合约</span><span class="typ">PlayerBook</span><span class="pun">的</span><span class="pln">abi</span><span class="pun">文件:</span><span class="pln"> </span><span class="pun">../</span><span class="pln">build</span><span class="pun">/</span><span class="typ">PlayerBook</span><span class="pun">/</span><span class="pln">abi</span><span class="pun">.</span><span class="pln">json </span><span class="pun">..</span></code></li><li class="L3"><code><span class="pln"> </span><span class="pun">生成合约</span><span class="typ">PlayerBook</span><span class="pun">的</span><span class="pln">bytecode</span><span class="pun">文件:</span><span class="pln"> </span><span class="pun">../</span><span class="pln">build</span><span class="pun">/</span><span class="typ">PlayerBook</span><span class="pun">/</span><span class="pln">bytecode</span><span class="pun">.</span><span class="pln">s </span><span class="pun">..</span></code></li><li class="L4"><code><span class="pln"> </span><span class="pun">生成合约</span><span class="typ">TeamJust</span><span class="pun">的</span><span class="kwd">interface</span><span class="pun">文件:</span><span class="pln"> </span><span class="pun">../</span><span class="pln">build</span><span class="pun">/</span><span class="typ">TeamJust</span><span class="pun">/</span><span class="typ">TeamJust</span><span class="pun">.</span><span class="pln">json </span><span class="pun">..</span></code></li><li class="L5"><code><span class="pln"> </span><span class="pun">生成合约</span><span class="typ">TeamJust</span><span class="pun">的</span><span class="pln">abi</span><span class="pun">文件:</span><span class="pln"> </span><span class="pun">../</span><span class="pln">build</span><span class="pun">/</span><span class="typ">TeamJust</span><span class="pun">/</span><span class="pln">abi</span><span class="pun">.</span><span class="pln">json </span><span class="pun">..</span></code></li><li class="L6"><code><span class="pln"> </span><span class="pun">生成合约</span><span class="typ">TeamJust</span><span class="pun">的</span><span class="pln">bytecode</span><span class="pun">文件:</span><span class="pln"> </span><span class="pun">../</span><span class="pln">build</span><span class="pun">/</span><span class="typ">TeamJust</span><span class="pun">/</span><span class="pln">bytecode</span><span class="pun">.</span><span class="pln">s </span><span class="pun">..</span></code></li><li class="L7"><code><span class="pln"> </span><span class="pun">生成合约</span><span class="pln">F3DKeysCalcLong</span><span class="pun">的</span><span class="kwd">interface</span><span class="pun">文件:</span><span class="pln"> </span><span class="pun">../</span><span class="pln">build</span><span class="pun">/</span><span class="pln">F3DKeysCalcLong</span><span class="pun">/</span><span class="pln">F3DKeysCalcLong</span><span class="pun">.</span><span class="pln">json </span><span class="pun">..</span></code></li><li class="L8"><code><span class="pln"> </span><span class="pun">生成合约</span><span class="pln">F3DKeysCalcLong</span><span class="pun">的</span><span class="pln">abi</span><span class="pun">文件:</span><span class="pln"> </span><span class="pun">../</span><span class="pln">build</span><span class="pun">/</span><span class="pln">F3DKeysCalcLong</span><span class="pun">/</span><span class="pln">abi</span><span class="pun">.</span><span class="pln">json </span><span class="pun">..</span></code></li><li class="L9"><code><span class="pln"> </span><span class="pun">生成合约</span><span class="pln">F3DKeysCalcLong</span><span class="pun">的</span><span class="pln">bytecode</span><span class="pun">文件:</span><span class="pln"> </span><span class="pun">../</span><span class="pln">build</span><span class="pun">/</span><span class="pln">F3DKeysCalcLong</span><span class="pun">/</span><span class="pln">bytecode</span><span class="pun">.</span><span class="pln">s </span><span class="pun">..</span></code></li><li class="L0"><code><span class="pln"> </span><span class="pun">生成合约</span><span class="pln">F3Ddatasets</span><span class="pun">的</span><span class="kwd">interface</span><span class="pun">文件:</span><span class="pln"> </span><span class="pun">../</span><span class="pln">build</span><span class="pun">/</span><span class="pln">F3Ddatasets</span><span class="pun">/</span><span class="pln">F3Ddatasets</span><span class="pun">.</span><span class="pln">json </span><span class="pun">..</span></code></li><li class="L1"><code><span class="pln"> </span><span class="pun">生成合约</span><span class="pln">F3Ddatasets</span><span class="pun">的</span><span class="pln">abi</span><span class="pun">文件:</span><span class="pln"> </span><span class="pun">../</span><span class="pln">build</span><span class="pun">/</span><span class="pln">F3Ddatasets</span><span class="pun">/</span><span class="pln">abi</span><span class="pun">.</span><span class="pln">json </span><span class="pun">..</span></code></li><li class="L2"><code><span class="pln"> </span><span class="pun">生成合约</span><span class="pln">F3Ddatasets</span><span class="pun">的</span><span class="pln">bytecode</span><span class="pun">文件:</span><span class="pln"> </span><span class="pun">../</span><span class="pln">build</span><span class="pun">/</span><span class="pln">F3Ddatasets</span><span class="pun">/</span><span class="pln">bytecode</span><span class="pun">.</span><span class="pln">s </span><span class="pun">..</span></code></li><li class="L3"><code><span class="pln"> </span><span class="pun">生成合约</span><span class="typ">MSFun</span><span class="pun">的</span><span class="kwd">interface</span><span class="pun">文件:</span><span class="pln"> </span><span class="pun">../</span><span class="pln">build</span><span class="pun">/</span><span class="typ">MSFun</span><span class="pun">/</span><span class="typ">MSFun</span><span class="pun">.</span><span class="pln">json </span><span class="pun">..</span></code></li><li class="L4"><code><span class="pln"> </span><span class="pun">生成合约</span><span class="typ">MSFun</span><span class="pun">的</span><span class="pln">abi</span><span class="pun">文件:</span><span class="pln"> </span><span class="pun">../</span><span class="pln">build</span><span class="pun">/</span><span class="typ">MSFun</span><span class="pun">/</span><span class="pln">abi</span><span class="pun">.</span><span class="pln">json </span><span class="pun">..</span></code></li><li class="L5"><code><span class="pln"> </span><span class="pun">生成合约</span><span class="typ">MSFun</span><span class="pun">的</span><span class="pln">bytecode</span><span class="pun">文件:</span><span class="pln"> </span><span class="pun">../</span><span class="pln">build</span><span class="pun">/</span><span class="typ">MSFun</span><span class="pun">/</span><span class="pln">bytecode</span><span class="pun">.</span><span class="pln">s </span><span class="pun">..</span></code></li><li class="L6"><code><span class="pln"> </span><span class="pun">生成合约</span><span class="typ">NameFilter</span><span class="pun">的</span><span class="kwd">interface</span><span class="pun">文件:</span><span class="pln"> </span><span class="pun">../</span><span class="pln">build</span><span class="pun">/</span><span class="typ">NameFilter</span><span class="pun">/</span><span class="typ">NameFilter</span><span class="pun">.</span><span class="pln">json </span><span class="pun">..</span></code></li><li class="L7"><code><span class="pln"> </span><span class="pun">生成合约</span><span class="typ">NameFilter</span><span class="pun">的</span><span class="pln">abi</span><span class="pun">文件:</span><span class="pln"> </span><span class="pun">../</span><span class="pln">build</span><span class="pun">/</span><span class="typ">NameFilter</span><span class="pun">/</span><span class="pln">abi</span><span class="pun">.</span><span class="pln">json </span><span class="pun">..</span></code></li><li class="L8"><code><span class="pln"> </span><span class="pun">生成合约</span><span class="typ">NameFilter</span><span class="pun">的</span><span class="pln">bytecode</span><span class="pun">文件:</span><span class="pln"> </span><span class="pun">../</span><span class="pln">build</span><span class="pun">/</span><span class="typ">NameFilter</span><span class="pun">/</span><span class="pln">bytecode</span><span class="pun">.</span><span class="pln">s </span><span class="pun">..</span></code></li><li class="L9"><code><span class="pln"> </span><span class="pun">生成合约</span><span class="typ">SafeMath</span><span class="pun">的</span><span class="kwd">interface</span><span class="pun">文件:</span><span class="pln"> </span><span class="pun">../</span><span class="pln">build</span><span class="pun">/</span><span class="typ">SafeMath</span><span class="pun">/</span><span class="typ">SafeMath</span><span class="pun">.</span><span class="pln">json </span><span class="pun">..</span></code></li><li class="L0"><code><span class="pln"> </span><span class="pun">生成合约</span><span class="typ">SafeMath</span><span class="pun">的</span><span class="pln">abi</span><span class="pun">文件:</span><span class="pln"> </span><span class="pun">../</span><span class="pln">build</span><span class="pun">/</span><span class="typ">SafeMath</span><span class="pun">/</span><span class="pln">abi</span><span class="pun">.</span><span class="pln">json </span><span class="pun">..</span></code></li><li class="L1"><code><span class="pln"> </span><span class="pun">生成合约</span><span class="typ">SafeMath</span><span class="pun">的</span><span class="pln">bytecode</span><span class="pun">文件:</span><span class="pln"> </span><span class="pun">../</span><span class="pln">build</span><span class="pun">/</span><span class="typ">SafeMath</span><span class="pun">/</span><span class="pln">bytecode</span><span class="pun">.</span><span class="pln">s </span><span class="pun">..</span></code></li><li class="L2"><code><span class="pln"> </span><span class="pun">生成合约</span><span class="typ">UintCompressor</span><span class="pun">的</span><span class="kwd">interface</span><span class="pun">文件:</span><span class="pln"> </span><span class="pun">../</span><span class="pln">build</span><span class="pun">/</span><span class="typ">UintCompressor</span><span class="pun">/</span><span class="typ">UintCompressor</span><span class="pun">.</span><span class="pln">json </span><span class="pun">..</span></code></li><li class="L3"><code><span class="pln"> </span><span class="pun">生成合约</span><span class="typ">UintCompressor</span><span class="pun">的</span><span class="pln">abi</span><span class="pun">文件:</span><span class="pln"> </span><span class="pun">../</span><span class="pln">build</span><span class="pun">/</span><span class="typ">UintCompressor</span><span class="pun">/</span><span class="pln">abi</span><span class="pun">.</span><span class="pln">json </span><span class="pun">..</span></code></li><li class="L4"><code><span class="pln"> </span><span class="pun">生成合约</span><span class="typ">UintCompressor</span><span class="pun">的</span><span class="pln">bytecode</span><span class="pun">文件:</span><span class="pln"> </span><span class="pun">../</span><span class="pln">build</span><span class="pun">/</span><span class="typ">UintCompressor</span><span class="pun">/</span><span class="pln">bytecode</span><span class="pun">.</span><span class="pln">s </span><span class="pun">..</span></code></li><li class="L5"><code><span class="pln"> </span><span class="pun">生成合约</span><span class="pln">F3Ddatasets</span><span class="pun">的</span><span class="kwd">interface</span><span class="pun">文件:</span><span class="pln"> </span><span class="pun">../</span><span class="pln">build</span><span class="pun">/</span><span class="pln">F3Ddatasets</span><span class="pun">/</span><span class="pln">F3Ddatasets</span><span class="pun">.</span><span class="pln">json </span><span class="pun">..</span></code></li><li class="L6"><code><span class="pln"> </span><span class="pun">生成合约</span><span class="pln">F3Ddatasets</span><span class="pun">的</span><span class="pln">abi</span><span class="pun">文件:</span><span class="pln"> </span><span class="pun">../</span><span class="pln">build</span><span class="pun">/</span><span class="pln">F3Ddatasets</span><span class="pun">/</span><span class="pln">abi</span><span class="pun">.</span><span class="pln">json </span><span class="pun">..</span></code></li><li class="L7"><code><span class="pln"> </span><span class="pun">生成合约</span><span class="pln">F3Ddatasets</span><span class="pun">的</span><span class="pln">bytecode</span><span class="pun">文件:</span><span class="pln"> </span><span class="pun">../</span><span class="pln">build</span><span class="pun">/</span><span class="pln">F3Ddatasets</span><span class="pun">/</span><span class="pln">bytecode</span><span class="pun">.</span><span class="pln">s </span><span class="pun">..</span></code></li><li class="L8"><code><span class="pln"> </span><span class="pun">生成合约</span><span class="typ">NameFilter</span><span class="pun">的</span><span class="kwd">interface</span><span class="pun">文件:</span><span class="pln"> </span><span class="pun">../</span><span class="pln">build</span><span class="pun">/</span><span class="typ">NameFilter</span><span class="pun">/</span><span class="typ">NameFilter</span><span class="pun">.</span><span class="pln">json </span><span class="pun">..</span></code></li><li class="L9"><code><span class="pln"> </span><span class="pun">生成合约</span><span class="typ">NameFilter</span><span class="pun">的</span><span class="pln">abi</span><span class="pun">文件:</span><span class="pln"> </span><span class="pun">../</span><span class="pln">build</span><span class="pun">/</span><span class="typ">NameFilter</span><span class="pun">/</span><span class="pln">abi</span><span class="pun">.</span><span class="pln">json </span><span class="pun">..</span></code></li><li class="L0"><code><span class="pln"> </span><span class="pun">生成合约</span><span class="typ">NameFilter</span><span class="pun">的</span><span class="pln">bytecode</span><span class="pun">文件:</span><span class="pln"> </span><span class="pun">../</span><span class="pln">build</span><span class="pun">/</span><span class="typ">NameFilter</span><span class="pun">/</span><span class="pln">bytecode</span><span class="pun">.</span><span class="pln">s </span><span class="pun">..</span></code></li><li class="L1"><code><span class="pln"> </span><span class="pun">生成合约</span><span class="typ">SafeMath</span><span class="pun">的</span><span class="kwd">interface</span><span class="pun">文件:</span><span class="pln"> </span><span class="pun">../</span><span class="pln">build</span><span class="pun">/</span><span class="typ">SafeMath</span><span class="pun">/</span><span class="typ">SafeMath</span><span class="pun">.</span><span class="pln">json </span><span class="pun">..</span></code></li><li class="L2"><code><span class="pln"> </span><span class="pun">生成合约</span><span class="typ">SafeMath</span><span class="pun">的</span><span class="pln">abi</span><span class="pun">文件:</span><span class="pln"> </span><span class="pun">../</span><span class="pln">build</span><span class="pun">/</span><span class="typ">SafeMath</span><span class="pun">/</span><span class="pln">abi</span><span class="pun">.</span><span class="pln">json </span><span class="pun">..</span></code></li><li class="L3"><code><span class="pln"> </span><span class="pun">生成合约</span><span class="typ">SafeMath</span><span class="pun">的</span><span class="pln">bytecode</span><span class="pun">文件:</span><span class="pln"> </span><span class="pun">../</span><span class="pln">build</span><span class="pun">/</span><span class="typ">SafeMath</span><span class="pun">/</span><span class="pln">bytecode</span><span class="pun">.</span><span class="pln">s </span><span class="pun">..</span></code></li><li class="L4"><code><span class="pln"> </span><span class="pun">生成合约</span><span class="typ">TinyF3D</span><span class="pun">的</span><span class="kwd">interface</span><span class="pun">文件:</span><span class="pln"> </span><span class="pun">../</span><span class="pln">build</span><span class="pun">/</span><span class="typ">TinyF3D</span><span class="pun">/</span><span class="typ">TinyF3D</span><span class="pun">.</span><span class="pln">json </span><span class="pun">..</span></code></li><li class="L5"><code><span class="pln"> </span><span class="pun">生成合约</span><span class="typ">TinyF3D</span><span class="pun">的</span><span class="pln">abi</span><span class="pun">文件:</span><span class="pln"> </span><span class="pun">../</span><span class="pln">build</span><span class="pun">/</span><span class="typ">TinyF3D</span><span class="pun">/</span><span class="pln">abi</span><span class="pun">.</span><span class="pln">json </span><span class="pun">..</span></code></li><li class="L6"><code><span class="pln"> </span><span class="pun">生成合约</span><span class="typ">TinyF3D</span><span class="pun">的</span><span class="pln">bytecode</span><span class="pun">文件:</span><span class="pln"> </span><span class="pun">../</span><span class="pln">build</span><span class="pun">/</span><span class="typ">TinyF3D</span><span class="pun">/</span><span class="pln">bytecode</span><span class="pun">.</span><span class="pln">s </span><span class="pun">..</span></code></li><li class="L7"><code><span class="pun">合约编译完成.</span></code></li></ol></pre><p>部署:<br>根据config.py配置的地址部署编译完成的合约,合约部署后会在build目录下生成一个address.s里面包含合约部署的地址。部署时可以在core/init_contract.py里面单独配置部署流程，主要争对一个合约需要传入之前合约部署地址的情况。 </p><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code><span class="pln">G</span><span class="pun">:</span><span class="pln">\work\pyproject\pyw3c</span><span class="pun">&gt;</span><span class="pln">python pyw3c</span><span class="pun">.</span><span class="pln">py migrate</span></code></li><li class="L1"><code><span class="pun">部署合约..</span></code></li><li class="L2"><code><span class="pln"> </span><span class="pun">合约</span><span class="pln">F3Ddatasets</span><span class="pun">部署地址:</span><span class="pln"> </span><span class="lit">0xbcD356E42ECffAEC4A4A7818a97F7b64239D3a6c</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> </span><span class="pun">使用</span><span class="pln">gas</span><span class="pun">数量:</span><span class="pln"> </span><span class="lit">74748</span><span class="pln"> </span><span class="pun">块地址:</span><span class="pln"> </span><span class="lit">41</span></code></li><li class="L3"><code><span class="pln"> </span><span class="pun">合约</span><span class="pln">F3Devents</span><span class="pun">部署地址:</span><span class="pln"> </span><span class="lit">0x0BAADeEc7200731d96B8789c564FBA74EFD78Ccf</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> </span><span class="pun">使用</span><span class="pln">gas</span><span class="pun">数量:</span><span class="pln"> </span><span class="lit">68794</span><span class="pln"> </span><span class="pun">块地址:</span><span class="pln"> </span><span class="lit">42</span></code></li><li class="L4"><code><span class="pln"> </span><span class="pun">合约</span><span class="pln">F3DKeysCalcLong</span><span class="pun">部署地址:</span><span class="pln"> </span><span class="lit">0x23909826dc0A51C2C0D59B2b4f65D678edfceb7D</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> </span><span class="pun">使用</span><span class="pln">gas</span><span class="pun">数量:</span><span class="pln"> </span><span class="lit">74748</span><span class="pln"> </span><span class="pun">块地址:</span><span class="pln"> </span><span class="lit">43</span></code></li><li class="L5"><code><span class="pln"> </span><span class="pun">合约</span><span class="typ">FoMo3Dlong</span><span class="pun">部署地址:</span><span class="pln"> </span><span class="lit">0x0FD0Ace46d2e0Bdb1D964424C20FB54998525C4E</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> </span><span class="pun">使用</span><span class="pln">gas</span><span class="pun">数量:</span><span class="pln"> </span><span class="lit">6182129</span><span class="pln"> </span><span class="pun">块地址:</span><span class="pln"> </span><span class="lit">44</span></code></li><li class="L6"><code><span class="pln"> </span><span class="pun">合约</span><span class="typ">Hourglass</span><span class="pun">部署地址:</span><span class="pln"> </span><span class="lit">0xc27CC06b387e0c15F0209b6455607820C4bD0097</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> </span><span class="pun">使用</span><span class="pln">gas</span><span class="pun">数量:</span><span class="pln"> </span><span class="lit">2297432</span><span class="pln"> </span><span class="pun">块地址:</span><span class="pln"> </span><span class="lit">45</span></code></li><li class="L7"><code><span class="pln"> </span><span class="pun">合约</span><span class="typ">MSFun</span><span class="pun">部署地址:</span><span class="pln"> </span><span class="lit">0xaD0A4c8c05075e84D34FF96cc121757bb1adA762</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> </span><span class="pun">使用</span><span class="pln">gas</span><span class="pun">数量:</span><span class="pln"> </span><span class="lit">74748</span><span class="pln"> </span><span class="pun">块地址:</span><span class="pln"> </span><span class="lit">46</span></code></li><li class="L8"><code><span class="pln"> </span><span class="pun">合约</span><span class="typ">NameFilter</span><span class="pun">部署地址:</span><span class="pln"> </span><span class="lit">0x178f71A6a8Da12B5b35A546a30b494AB8d296A92</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> </span><span class="pun">使用</span><span class="pln">gas</span><span class="pun">数量:</span><span class="pln"> </span><span class="lit">74748</span><span class="pln"> </span><span class="pun">块地址:</span><span class="pln"> </span><span class="lit">47</span></code></li><li class="L9"><code><span class="pln"> </span><span class="pun">合约</span><span class="typ">PlayerBook</span><span class="pun">部署地址:</span><span class="pln"> </span><span class="lit">0x77F80e9A250Ac2B22208fa194dFF65780b97f9A5</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> </span><span class="pun">使用</span><span class="pln">gas</span><span class="pun">数量:</span><span class="pln"> </span><span class="lit">3617606</span><span class="pln"> </span><span class="pun">块地址:</span><span class="pln"> </span><span class="lit">48</span></code></li><li class="L0"><code><span class="pln"> </span><span class="pun">合约</span><span class="typ">SafeMath</span><span class="pun">部署地址:</span><span class="pln"> </span><span class="lit">0xCB33c64ABb41a5015769Bb78FC614A43bFCd16f0</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> </span><span class="pun">使用</span><span class="pln">gas</span><span class="pun">数量:</span><span class="pln"> </span><span class="lit">74748</span><span class="pln"> </span><span class="pun">块地址:</span><span class="pln"> </span><span class="lit">49</span></code></li><li class="L1"><code><span class="pln"> </span><span class="pun">合约</span><span class="typ">TeamJust</span><span class="pun">部署地址:</span><span class="pln"> </span><span class="lit">0xf5470912F811b7B4aBe8ce43861B0E79d445fFC2</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> </span><span class="pun">使用</span><span class="pln">gas</span><span class="pun">数量:</span><span class="pln"> </span><span class="lit">1747981</span><span class="pln"> </span><span class="pun">块地址:</span><span class="pln"> </span><span class="lit">50</span></code></li><li class="L2"><code><span class="pln"> </span><span class="pun">合约</span><span class="typ">TinyF3D</span><span class="pun">部署地址:</span><span class="pln"> </span><span class="lit">0xf51772077cE32cFE12Bcd01916567E5A0BDDE529</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> </span><span class="pun">使用</span><span class="pln">gas</span><span class="pun">数量:</span><span class="pln"> </span><span class="lit">5997148</span><span class="pln"> </span><span class="pun">块地址:</span><span class="pln"> </span><span class="lit">51</span></code></li><li class="L3"><code><span class="pln"> </span><span class="pun">合约</span><span class="typ">UintCompressor</span><span class="pun">部署地址:</span><span class="pln"> </span><span class="lit">0xE2ad4de47a5500Da6390C49Dfc13F62762B8A97e</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> </span><span class="pun">使用</span><span class="pln">gas</span><span class="pun">数量:</span><span class="pln"> </span><span class="lit">74748</span><span class="pln"> </span><span class="pun">块地址:</span><span class="pln"> </span><span class="lit">52</span></code></li><li class="L4"><code><span class="pun">部署完成..</span></code></li><li class="L5"><code><span class="pun">初始化合约..</span></code></li><li class="L6"><code><span class="pun">初始化完成</span></code></li></ol></pre><p>测试：<br>测试代码可以写在core/apitest.py里面，RPC使用的web3.py模块。 </p><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code><span class="pln">G</span><span class="pun">:</span><span class="pln">\work\pyproject\pyw3c</span><span class="pun">&gt;</span><span class="pln">python pyw3c</span><span class="pun">.</span><span class="pln">py test</span></code></li><li class="L1"><code><span class="pun">添加一个玩家:</span><span class="pln"> </span><span class="lit">0x19cb9fef172c4ec2803d6d5431632b1abc62c5fd1666f9b8d46bc8ce6a2fc06b</span></code></li><li class="L2"><code></code></li><li class="L3"><code><span class="pun">回合数据:</span><span class="pln"> </span><span class="pun">{</span><span class="str">'ICO投入'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="str">'回合ID'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="str">'总钥匙数'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0.0</span><span class="pun">,</span><span class="pln"> </span><span class="str">'结束时间'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1535516085</span><span class="pun">,</span><span class="pln"> </span><span class="str">'开始时间'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1535512485</span><span class="pun">,</span><span class="pln"> </span><span class="str">'当前奖池'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0.0</span><span class="pun">,</span><span class="pln"> </span><span class="str">'领先队伍和玩家ID'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="str">'领先玩家地址'</span><span class="pun">:</span><span class="pln"> </span><span class="str">''</span><span class="pun">,</span><span class="pln"> </span><span class="str">'领先玩家名称'</span><span class="pun">:</span><span class="pln"> </span><span class="str">''</span><span class="pun">,</span><span class="pln"> </span><span class="str">'鲸队eth'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0.0</span><span class="pun">,</span><span class="pln"> </span><span class="str">'熊队e</span></code></li><li class="L4"><code><span class="str">th'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0.0</span><span class="pun">,</span><span class="pln"> </span><span class="str">'蛇队eth'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0.0</span><span class="pun">,</span><span class="pln"> </span><span class="str">'牛队eth'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0.0</span><span class="pun">,</span><span class="pln"> </span><span class="str">'当前空投概率'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0.0</span><span class="pun">}</span></code></li><li class="L5"><code></code></li><li class="L6"><code><span class="pln"> </span><span class="pun">玩家信息:</span><span class="pln"> </span><span class="pun">{</span><span class="str">'玩家ID'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="str">'玩家姓名'</span><span class="pun">:</span><span class="pln"> </span><span class="str">''</span><span class="pun">,</span><span class="pln"> </span><span class="str">'钥匙数'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0.0</span><span class="pun">,</span><span class="pln"> </span><span class="str">'金库'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0.0</span><span class="pun">,</span><span class="pln"> </span><span class="str">'获利'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0.0</span><span class="pun">,</span><span class="pln"> </span><span class="str">'推广'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0.0</span><span class="pun">,</span><span class="pln"> </span><span class="str">'回合投入'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0.0</span><span class="pun">}</span></code></li><li class="L7"><code></code></li><li class="L8"><code><span class="pln"> </span><span class="pun">购买钥匙:</span><span class="pln"> </span><span class="lit">0x696b23f07ef0062c9c1c9c7dd80f2db67a360bb2e73ddf0a37314e7b7b2ac167</span></code></li><li class="L9"><code></code></li><li class="L0"><code><span class="pln"> </span><span class="pun">玩家信息:</span><span class="pln"> </span><span class="pun">{</span><span class="str">'玩家ID'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="str">'玩家姓名'</span><span class="pun">:</span><span class="pln"> </span><span class="str">''</span><span class="pun">,</span><span class="pln"> </span><span class="str">'钥匙数'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1331.488</span><span class="pun">,</span><span class="pln"> </span><span class="str">'金库'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0.0</span><span class="pun">,</span><span class="pln"> </span><span class="str">'获利'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0.043</span><span class="pun">,</span><span class="pln"> </span><span class="str">'推广'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0.0</span><span class="pun">,</span><span class="pln"> </span><span class="str">'回合投入'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0.1</span><span class="pun">}</span></code></li><li class="L1"><code></code></li><li class="L2"><code><span class="pun">回合数据:</span><span class="pln"> </span><span class="pun">{</span><span class="str">'ICO投入'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="str">'回合ID'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="str">'总钥匙数'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1331.488</span><span class="pun">,</span><span class="pln"> </span><span class="str">'结束时间'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1535556015</span><span class="pun">,</span><span class="pln"> </span><span class="str">'开始时间'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1535512485</span><span class="pun">,</span><span class="pln"> </span><span class="str">'当前奖池'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0.043</span><span class="pun">,</span><span class="pln"> </span><span class="str">'领先队伍和玩家ID'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">11</span><span class="pun">,</span><span class="pln"> </span><span class="str">'领先玩家地址'</span><span class="pun">:</span><span class="pln"> </span><span class="str">''</span><span class="pun">,</span><span class="pln"> </span><span class="str">'领先玩家名称'</span><span class="pun">:</span><span class="pln"> </span><span class="str">''</span><span class="pun">,</span><span class="pln"> </span><span class="str">'鲸队eth'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0.0</span></code></li><li class="L3"><code><span class="pun">,</span><span class="pln"> </span><span class="str">'熊队eth'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0.1</span><span class="pun">,</span><span class="pln"> </span><span class="str">'蛇队eth'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0.0</span><span class="pun">,</span><span class="pln"> </span><span class="str">'牛队eth'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0.0</span><span class="pun">,</span><span class="pln"> </span><span class="str">'当前空投概率'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0.001</span><span class="pun">}</span></code></li><li class="L4"><code></code></li><li class="L5"><code><span class="pln"> </span><span class="pun">购买钥匙:</span><span class="pln"> </span><span class="lit">0x01ab66a34fb44f50da562fd19238d27577258ec00f16cd24ad74524c9b7bc097</span></code></li><li class="L6"><code></code></li><li class="L7"><code><span class="pln"> </span><span class="pun">玩家信息:</span><span class="pln"> </span><span class="pun">{</span><span class="str">'玩家ID'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="str">'玩家姓名'</span><span class="pun">:</span><span class="pln"> </span><span class="str">''</span><span class="pun">,</span><span class="pln"> </span><span class="str">'钥匙数'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">2659.3029</span><span class="pun">,</span><span class="pln"> </span><span class="str">'金库'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0.0</span><span class="pun">,</span><span class="pln"> </span><span class="str">'获利'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0.086</span><span class="pun">,</span><span class="pln"> </span><span class="str">'推广'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0.0</span><span class="pun">,</span><span class="pln"> </span><span class="str">'回合投入'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0.2</span><span class="pun">}</span></code></li><li class="L8"><code></code></li><li class="L9"><code><span class="pun">回合数据:</span><span class="pln"> </span><span class="pun">{</span><span class="str">'ICO投入'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="str">'回合ID'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="str">'总钥匙数'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">2659.3029</span><span class="pun">,</span><span class="pln"> </span><span class="str">'结束时间'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1535595825</span><span class="pun">,</span><span class="pln"> </span><span class="str">'开始时间'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1535512485</span><span class="pun">,</span><span class="pln"> </span><span class="str">'当前奖池'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0.086</span><span class="pun">,</span><span class="pln"> </span><span class="str">'领先队伍和玩家ID'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">11</span><span class="pun">,</span><span class="pln"> </span><span class="str">'领先玩家地址'</span><span class="pun">:</span><span class="pln"> </span><span class="str">''</span><span class="pun">,</span><span class="pln"> </span><span class="str">'领先玩家名称'</span><span class="pun">:</span><span class="pln"> </span><span class="str">''</span><span class="pun">,</span><span class="pln"> </span><span class="str">'鲸队eth'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0.</span></code></li><li class="L0"><code><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="str">'熊队eth'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0.2</span><span class="pun">,</span><span class="pln"> </span><span class="str">'蛇队eth'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0.0</span><span class="pun">,</span><span class="pln"> </span><span class="str">'牛队eth'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0.0</span><span class="pun">,</span><span class="pln"> </span><span class="str">'当前空投概率'</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0.002</span><span class="pun">}</span></code></li></ol></pre><p>生成：<br>core/template/app里面是生成的模板文件其中必须存在的是web3.min.js，在生成web目录的时候会将web3.min.js和部署好的合约对象生成一个app.js放在web目录，其中部署好的合约对象自动加载编译部署步骤生成的abi和address,web目录需要用户自己去引用app.js，可以通过合约名称直接使用创建好的合约对象。 </p><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code><span class="pln">G</span><span class="pun">:</span><span class="pln">\work\pyproject\pyw3c</span><span class="pun">&gt;</span><span class="pln">python pyw3c</span><span class="pun">.</span><span class="pln">py webc</span></code></li><li class="L1"><code><span class="pun">生成</span><span class="pln">web</span><span class="pun">目录..</span></code></li><li class="L2"><code><span class="pln"> </span><span class="pun">生成</span><span class="pln">F3Devents</span><span class="pun">调用参数..</span></code></li><li class="L3"><code><span class="pln"> </span><span class="pun">生成</span><span class="typ">FoMo3Dlong</span><span class="pun">调用参数..</span></code></li><li class="L4"><code><span class="pln"> </span><span class="pun">生成</span><span class="typ">Hourglass</span><span class="pun">调用参数..</span></code></li><li class="L5"><code><span class="pln"> </span><span class="pun">生成</span><span class="typ">PlayerBook</span><span class="pun">调用参数..</span></code></li><li class="L6"><code><span class="pln"> </span><span class="pun">生成</span><span class="typ">TeamJust</span><span class="pun">调用参数..</span></code></li><li class="L7"><code><span class="pln"> </span><span class="pun">生成</span><span class="typ">TinyF3D</span><span class="pun">调用参数..</span></code></li><li class="L8"><code><span class="pln"> </span><span class="pun">生成</span><span class="pln">app</span><span class="pun">.</span><span class="pln">js</span></code></li><li class="L9"><code><span class="pln"> </span><span class="pun">生成</span><span class="pln">run</span><span class="pun">.</span><span class="pln">py</span></code></li><li class="L0"><code><span class="pun">生成</span><span class="pln">web</span><span class="pun">目录完成</span></code></li></ol></pre><p>运行：<br>在生成步骤会在web/app目录生成一个run.py，执行运行命令会启动一个aiohttp的web服务器，根目录就是web/app/。 </p><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code><span class="pln">G</span><span class="pun">:</span><span class="pln">\work\pyproject\pyw3c</span><span class="pun">&gt;</span><span class="pln">python pyw3c</span><span class="pun">.</span><span class="pln">py run</span></code></li><li class="L1"><code></code></li><li class="L2"><code><span class="pun">启动</span><span class="pln">web</span><span class="pun">服务器..</span></code></li><li class="L3"><code><span class="pun">========</span><span class="pln"> </span><span class="typ">Running</span><span class="pln"> on http</span><span class="pun">:</span><span class="com">//localhost:9000 ========</span></code></li><li class="L4"><code><span class="pun">(</span><span class="typ">Press</span><span class="pln"> CTRL</span><span class="pun">+</span><span class="pln">C to quit</span><span class="pun">)</span></code></li></ol></pre></body> </html>
